---
import { Image } from "astro:assets"
import CalendarImage from "@/assets/images/calendario.webp"
---

<div class="mx-auto mt-24 max-w-2xl p-4 pb-32 lg:max-w-6xl">
  <div
    class="mx-auto flex flex-row items-center justify-center gap-x-4 text-lg font-semibold tracking-tight text-balance text-gray-950 md:gap-x-8 md:text-2xl lg:text-3xl xl:text-4xl"
  >
    <div class="shrink-0">
      <img
        class="mx-auto inline-block size-20 rounded-full md:size-24"
        src="/lolalolita-avatar.webp"
        alt="Lola Lolita"
      />
    </div>
    <span class="inline-block py-4 text-left text-white md:py-6 lg:py-8">
      ¿Estáis preparados para
      <br />
      pasar
      <span class="magic relative inline-block">
        <span class="magic-star">
          <svg viewBox="0 0 512 512">
            <path
              d="M512 255.1c0 11.34-7.406 20.86-18.44 23.64l-171.3 42.78l-42.78 171.1C276.7 504.6 267.2 512 255.9 512s-20.84-7.406-23.62-18.44l-42.66-171.2L18.47 279.6C7.406 276.8 0 267.3 0 255.1c0-11.34 7.406-20.83 18.44-23.61l171.2-42.78l42.78-171.1C235.2 7.406 244.7 0 256 0s20.84 7.406 23.62 18.44l42.78 171.2l171.2 42.78C504.6 235.2 512 244.6 512 255.1z"
            ></path>
          </svg>
        </span>
        <span class="magic-star">
          <svg viewBox="0 0 512 512">
            <path
              d="M512 255.1c0 11.34-7.406 20.86-18.44 23.64l-171.3 42.78l-42.78 171.1C276.7 504.6 267.2 512 255.9 512s-20.84-7.406-23.62-18.44l-42.66-171.2L18.47 279.6C7.406 276.8 0 267.3 0 255.1c0-11.34 7.406-20.83 18.44-23.61l171.2-42.78l42.78-171.1C235.2 7.406 244.7 0 256 0s20.84 7.406 23.62 18.44l42.78 171.2l171.2 42.78C504.6 235.2 512 244.6 512 255.1z"
            ></path>
          </svg>
        </span>
        <span class="magic-star">
          <svg viewBox="0 0 512 512">
            <path
              d="M512 255.1c0 11.34-7.406 20.86-18.44 23.64l-171.3 42.78l-42.78 171.1C276.7 504.6 267.2 512 255.9 512s-20.84-7.406-23.62-18.44l-42.66-171.2L18.47 279.6C7.406 276.8 0 267.3 0 255.1c0-11.34 7.406-20.83 18.44-23.61l171.2-42.78l42.78-171.1C235.2 7.406 244.7 0 256 0s20.84 7.406 23.62 18.44l42.78 171.2l171.2 42.78C504.6 235.2 512 244.6 512 255.1z"
            ></path>
          </svg>
        </span>
        <span class="magic-text">dos días inolvidables</span>?
      </span>
    </span>
  </div>
  <div
    class="view-animate-[--subjectReveal] animate-zoom-in animate-range-[entry_0%_cover_20%] grid scroll-mt-72 grid-cols-1 gap-2 pt-10 sm:mt-4 md:scroll-mt-96 lg:grid-cols-6"
    id="info"
  >
    <div class="relative lg:col-span-3">
      <div
        class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] bg-white max-lg:rounded-t-[calc(2rem+1px)] lg:rounded-tl-[calc(2rem+1px)] lg:rounded-bl-[calc(2rem+1px)]"
      >
        <div class="relative h-80 w-full overflow-hidden">
          <Image
            class="relative h-full w-full object-cover object-[85%_center] [mask-image:linear-gradient(to_bottom,black_80%,transparent_100%)] sm:object-center"
            src={CalendarImage}
            width={672}
            height={320}
            alt="Calendario con la fecha del evento LolaLolita Land 14 y 15 de junio de 2025"
          />
        </div>
        <div class="p-4 pt-4 sm:p-6 md:p-8 lg:p-10">
          <h3 class="text-primary text-sm/4 font-semibold">14 y 15 de junio</h3>
          <p class="mx-auto mt-2 text-base font-medium tracking-tight text-gray-950 sm:text-lg">
            ¡Dos días de diversión!
          </p>
          <p class="mt-2 text-xs/5 text-pretty text-gray-600 sm:text-sm/6">
            Apunta en tu calendario, porque LolaLolita Land abre sus puertas el 14 y 15 de junio
            para darle la bienvenida al verano.
            <a
              class="bg-primary-light hover:text-primary hover:bg-primary-light/50 inline-block max-w-full rounded-lg p-1 px-2 text-center break-words text-white transition"
              href="/events/event-lolalolita.ics">Hazlo aquí</a
            >
          </p>
        </div>
      </div>
      <div
        class="pointer-events-none absolute inset-px rounded-lg shadow-sm ring-1 ring-black/5 max-lg:rounded-t-[2rem] lg:rounded-tl-[2rem] lg:rounded-bl-[2rem]"
      >
      </div>
    </div>
    <div class="relative lg:col-span-3">
      <div
        class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] bg-white lg:rounded-tr-[calc(2rem+1px)] lg:rounded-br-[calc(2rem+1px)]"
      >
        <div class="relative h-80 w-full overflow-hidden">
          <img
            class="relative h-full w-full object-cover object-center [mask-image:linear-gradient(to_bottom,black_80%,transparent_100%)]"
            src="/images/aquopolis.webp"
            alt=""
          />
        </div>
        <div class="p-4 pt-4 sm:p-6 md:p-8 lg:p-10">
          <h3 class="text-primary text-sm/4 font-semibold">La experiencia más refrescante</h3>
          <p class="mx-auto mt-2 text-base font-medium tracking-tight text-gray-950 sm:text-lg">
            Un parque acuático lleno de sorpresas
          </p>
          <p class="mt-2 text-xs/5 text-pretty text-gray-600 sm:text-sm/6">
            Este año LolaLolita Land se celebra en Aquopolis, Madrid, un parque acuático lleno de
            toboganes y piscinas.
          </p>
        </div>
      </div>
      <div
        class="pointer-events-none absolute inset-px rounded-lg shadow-sm ring-1 ring-black/5 lg:rounded-tr-[2rem] lg:rounded-br-[2rem]"
      >
      </div>
    </div>
  </div>
</div>

<script>
  let index = 0
  let interval = 1000

  const rand = (min: number, max: number) => Math.floor(Math.random() * (max - min + 1)) + min

  const animate = (star: HTMLElement) => {
    star.style.setProperty("--star-left", `${rand(-10, 100)}%`)
    star.style.setProperty("--star-top", `${rand(-40, 80)}%`)

    star.style.animation = "none"
    star.offsetHeight
    star.style.animation = ""
  }

  for (const star of document.getElementsByClassName(
    "magic-star"
  ) as HTMLCollectionOf<HTMLElement>) {
    setTimeout(
      () => {
        animate(star)

        setInterval(() => animate(star), 1000)
      },
      index++ * (interval / 3)
    )
  }
</script>

<style>
  /* letter animation START  */
  .magic-star {
    --size: clamp(20px, 1.5vw, 30px);

    animation: scale 700ms ease forwards;
    display: block;
    height: var(--size);
    left: var(--star-left);
    position: absolute;
    top: var(--star-top);
    width: var(--size);
  }

  .magic > .magic-star > svg {
    animation: rotate 1000ms linear infinite;
    display: block;
    opacity: 0.7;
  }

  .magic > .magic-star > svg > path {
    fill: #dfdf18;
  }

  .magic > .magic-text {
    animation: background-pan 3s linear infinite;
    background: linear-gradient(to right, #383acf, #61e2e5, #383acf, #383acf);
    background-size: 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    white-space: nowrap;
  }
</style>
